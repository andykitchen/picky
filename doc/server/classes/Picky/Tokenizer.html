<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Picky::Tokenizer</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            Picky::Tokenizer 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/picky/tokenizer_rb.html">lib/picky/tokenizer.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>Defines tokenizing processes used both in indexing and querying.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-cap">cap</a>,
              </li>
            
              
              <li>
                <a href="#method-i-cap-3F">cap?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-case_sensitive">case_sensitive</a>,
              </li>
            
              
              <li>
                <a href="#method-i-check_argument_in">check_argument_in</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-downcase-3F">downcase?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-empty_tokens">empty_tokens</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-index_default">index_default</a>,
              </li>
            
              
              <li>
                <a href="#method-c-index_default-3D">index_default=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-max_words">max_words</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>,
              </li>
            
              
              <li>
                <a href="#method-i-normalize_with_patterns">normalize_with_patterns</a>,
              </li>
            
              
              <li>
                <a href="#method-i-normalize_with_patterns-3F">normalize_with_patterns?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-normalizes_words">normalizes_words</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-preprocess">preprocess</a>,
              </li>
            
              
              <li>
                <a href="#method-i-pretokenize">pretokenize</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>Q</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-query_default">query_default</a>,
              </li>
            
              
              <li>
                <a href="#method-c-query_default-3D">query_default=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-reject">reject</a>,
              </li>
            
              
              <li>
                <a href="#method-i-rejects_token_if">rejects_token_if</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_illegals">remove_illegals</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_non_single_stopwords">remove_non_single_stopwords</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_stopwords">remove_stopwords</a>,
              </li>
            
              
              <li>
                <a href="#method-i-removes_characters">removes_characters</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-split">split</a>,
              </li>
            
              
              <li>
                <a href="#method-i-splits_text_on">splits_text_on</a>,
              </li>
            
              
              <li>
                <a href="#method-i-stopwords">stopwords</a>,
              </li>
            
              
              <li>
                <a href="#method-i-substitute_characters">substitute_characters</a>,
              </li>
            
              
              <li>
                <a href="#method-i-substitutes_characters_with">substitutes_characters_with</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-to_s">to_s</a>,
              </li>
            
              
              <li>
                <a href="#method-i-tokenize">tokenize</a>,
              </li>
            
              
              <li>
                <a href="#method-i-tokens_for">tokens_for</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">EMPTY_STRING</td>
            <td>=</td>
            <td class="attr-value">''.freeze</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>TODO Move <a href="Tokenizer.html#EMPTY_STRING">EMPTY_STRING</a> top level.</p></td>
            </tr>
          
        
      </table>
    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>substituter</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>substituter?</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-index_default">
            
              <a name="method-c-index_default"></a><b>index_default</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-index_default_source')" id="l_method-c-index_default_source">show</a>
                
              </p>
              <div id="method-c-index_default_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 11</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">index_default</span>
  <span class="ruby-ivar">@index_default</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">new</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-index_default-3D">
            
              <a name="method-c-index_default-3D"></a><b>index_default=</b>(new_default)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-index_default-3D_source')" id="l_method-c-index_default-3D_source">show</a>
                
              </p>
              <div id="method-c-index_default-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 8</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">index_default=</span> <span class="ruby-identifier">new_default</span>
  <span class="ruby-ivar">@index_default</span> = <span class="ruby-identifier">new_default</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <a name="method-c-new"></a><b>new</b>(options = {})
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 163</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">initialize</span> <span class="ruby-identifier">options</span> = {}
  <span class="ruby-identifier">substitutes_characters_with</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:substitutes_characters_with</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:substitutes_characters_with</span>]
  <span class="ruby-identifier">removes_characters</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:removes_characters</span>]                   <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:removes_characters</span>]
  <span class="ruby-identifier">stopwords</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:stopwords</span>]                                     <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:stopwords</span>]
  <span class="ruby-identifier">splits_text_on</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:splits_text_on</span>]                           <span class="ruby-operator">||</span> <span class="ruby-regexp">/\s/</span>
  <span class="ruby-identifier">normalizes_words</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:normalizes_words</span>]                       <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:normalizes_words</span>]
  <span class="ruby-identifier">max_words</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:max_words</span>]
  <span class="ruby-identifier">rejects_token_if</span> &amp;(<span class="ruby-identifier">options</span>[<span class="ruby-value">:rejects_token_if</span>]                     <span class="ruby-operator">||</span> <span class="ruby-value">:blank?</span>)
  <span class="ruby-identifier">case_sensitive</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:case_sensitive</span>]                           <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:case_sensitive</span>].<span class="ruby-identifier">nil?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-query_default">
            
              <a name="method-c-query_default"></a><b>query_default</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-query_default_source')" id="l_method-c-query_default_source">show</a>
                
              </p>
              <div id="method-c-query_default_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 18</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">query_default</span>
  <span class="ruby-ivar">@query_default</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">new</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-query_default-3D">
            
              <a name="method-c-query_default-3D"></a><b>query_default=</b>(new_default)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-query_default-3D_source')" id="l_method-c-query_default-3D_source">show</a>
                
              </p>
              <div id="method-c-query_default-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 15</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">query_default=</span> <span class="ruby-identifier">new_default</span>
  <span class="ruby-ivar">@query_default</span> = <span class="ruby-identifier">new_default</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-cap">
            
              <a name="method-i-cap"></a><b>cap</b>(words)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-cap_source')" id="l_method-i-cap_source">show</a>
                
              </p>
              <div id="method-i-cap_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 147</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">cap</span> <span class="ruby-identifier">words</span>
  <span class="ruby-identifier">words</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-ivar">@max_words</span><span class="ruby-operator">..</span><span class="ruby-number">-1</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">cap?</span>(<span class="ruby-identifier">words</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-cap-3F">
            
              <a name="method-i-cap-3F"></a><b>cap?</b>(words)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-cap-3F_source')" id="l_method-i-cap-3F_source">show</a>
                
              </p>
              <div id="method-i-cap-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 150</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">cap?</span> <span class="ruby-identifier">words</span>
  <span class="ruby-ivar">@max_words</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">words</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@max_words</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-case_sensitive">
            
              <a name="method-i-case_sensitive"></a><b>case_sensitive</b>(case_sensitive)
            
          </div>
          
          
            <div class="description">
              <p>Case sensitivity.</p>

<p>Note: If false, simply downcases the data/query.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-case_sensitive_source')" id="l_method-i-case_sensitive_source">show</a>
                
              </p>
              <div id="method-i-case_sensitive_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 134</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">case_sensitive</span> <span class="ruby-identifier">case_sensitive</span>
  <span class="ruby-ivar">@case_sensitive</span> = <span class="ruby-identifier">case_sensitive</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-check_argument_in">
            
              <a name="method-i-check_argument_in"></a><b>check_argument_in</b>(method, type, argument, &amp;condition)
            
          </div>
          
          
            <div class="description">
              <p>Checks if the right argument type has been given.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-check_argument_in_source')" id="l_method-i-check_argument_in_source">show</a>
                
              </p>
              <div id="method-i-check_argument_in_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 156</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">check_argument_in</span> <span class="ruby-identifier">method</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">argument</span>, &amp;<span class="ruby-identifier">condition</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span> <span class="ruby-node">&quot;Application##{method} takes a #{type} as argument, not a #{argument.class}.&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">argument</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-downcase-3F">
            
              <a name="method-i-downcase-3F"></a><b>downcase?</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-downcase-3F_source')" id="l_method-i-downcase-3F_source">show</a>
                
              </p>
              <div id="method-i-downcase-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 137</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">downcase?</span>
  <span class="ruby-operator">!</span><span class="ruby-ivar">@case_sensitive</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-empty_tokens">
            
              <a name="method-i-empty_tokens"></a><b>empty_tokens</b>()
            
          </div>
          
          
            <div class="description">
              <p>Returns empty tokens.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-empty_tokens_source')" id="l_method-i-empty_tokens_source">show</a>
                
              </p>
              <div id="method-i-empty_tokens_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">empty_tokens</span>
  [[], []]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-max_words">
            
              <a name="method-i-max_words"></a><b>max_words</b>(amount)
            
          </div>
          
          
            <div class="description">
              <p>The maximum amount of words to pass into the search engine.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-max_words_source')" id="l_method-i-max_words_source">show</a>
                
              </p>
              <div id="method-i-max_words_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">max_words</span> <span class="ruby-identifier">amount</span>
  <span class="ruby-ivar">@max_words</span> = <span class="ruby-identifier">amount</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-normalize_with_patterns">
            
              <a name="method-i-normalize_with_patterns"></a><b>normalize_with_patterns</b>(text)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-normalize_with_patterns_source')" id="l_method-i-normalize_with_patterns_source">show</a>
                
              </p>
              <div id="method-i-normalize_with_patterns_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 94</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">normalize_with_patterns</span> <span class="ruby-identifier">text</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@normalizes_words_regexp_replaces</span>

  <span class="ruby-ivar">@normalizes_words_regexp_replaces</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">regex</span>, <span class="ruby-identifier">replace</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># This should be sufficient</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-identifier">regex</span>, <span class="ruby-identifier">replace</span>) <span class="ruby-keyword">and</span> <span class="ruby-keyword">break</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">text</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-normalize_with_patterns-3F">
            
              <a name="method-i-normalize_with_patterns-3F"></a><b>normalize_with_patterns?</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-normalize_with_patterns-3F_source')" id="l_method-i-normalize_with_patterns-3F_source">show</a>
                
              </p>
              <div id="method-i-normalize_with_patterns-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 105</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">normalize_with_patterns?</span>
  <span class="ruby-ivar">@normalizes_words_regexp_replaces</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-normalizes_words">
            
              <a name="method-i-normalizes_words"></a><b>normalizes_words</b>(regexp_replaces)
            
          </div>
          
          
            <div class="description">
              <p>Normalizing.</p>

<p>We only allow arrays.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-normalizes_words_source')" id="l_method-i-normalizes_words_source">show</a>
                
              </p>
              <div id="method-i-normalizes_words_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 90</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">normalizes_words</span> <span class="ruby-identifier">regexp_replaces</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span> <span class="ruby-node">&quot;#{__method__} takes an Array of replaces as argument, not a #{regexp_replaces.class}.&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">regexp_replaces</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:to_ary</span>)
  <span class="ruby-ivar">@normalizes_words_regexp_replaces</span> = <span class="ruby-identifier">regexp_replaces</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-preprocess">
            
              <a name="method-i-preprocess"></a><b>preprocess</b>(text)
            
          </div>
          
          
            <div class="description">
              <p>Default preprocessing hook.</p>

<p>Does:</p>
<ol><li>
<p>Character substitution.</p>
</li><li>
<p>Remove illegal expressions.</p>
</li><li>
<p>Remove non-single stopwords. (Stopwords that occur with other words)</p>
</li></ol>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-preprocess_source')" id="l_method-i-preprocess_source">show</a>
                
              </p>
              <div id="method-i-preprocess_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 196</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">preprocess</span> <span class="ruby-identifier">text</span>
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">substitute_characters</span> <span class="ruby-identifier">text</span>
  <span class="ruby-identifier">remove_illegals</span> <span class="ruby-identifier">text</span>
  <span class="ruby-comment"># We do not remove single stopwords e.g. in the indexer for</span>
  <span class="ruby-comment"># an entirely different reason than in the query tokenizer.</span>
  <span class="ruby-comment"># An indexed thing with just name &quot;UND&quot; (a possible stopword)</span>
  <span class="ruby-comment"># should not lose its name.</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-identifier">remove_non_single_stopwords</span> <span class="ruby-identifier">text</span>
  <span class="ruby-identifier">text</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-pretokenize">
            
              <a name="method-i-pretokenize"></a><b>pretokenize</b>(text)
            
          </div>
          
          
            <div class="description">
              <p>Pretokenizing.</p>

<p>Does:</p>

<pre>* Split the text into words.
* Cap the amount of tokens if max_words is set.</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-pretokenize_source')" id="l_method-i-pretokenize_source">show</a>
                
              </p>
              <div id="method-i-pretokenize_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 214</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">pretokenize</span> <span class="ruby-identifier">text</span>
  <span class="ruby-identifier">words</span> = <span class="ruby-identifier">split</span> <span class="ruby-identifier">text</span>
  <span class="ruby-identifier">words</span>.<span class="ruby-identifier">collect!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">word</span><span class="ruby-operator">|</span> <span class="ruby-identifier">normalize_with_patterns</span> <span class="ruby-identifier">word</span> } <span class="ruby-keyword">if</span> <span class="ruby-identifier">normalize_with_patterns?</span>
  <span class="ruby-identifier">reject</span> <span class="ruby-identifier">words</span>
  <span class="ruby-identifier">cap</span> <span class="ruby-identifier">words</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cap?</span>(<span class="ruby-identifier">words</span>)
  <span class="ruby-identifier">words</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-reject">
            
              <a name="method-i-reject"></a><b>reject</b>(tokens)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-reject_source')" id="l_method-i-reject_source">show</a>
                
              </p>
              <div id="method-i-reject_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 126</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">reject</span> <span class="ruby-identifier">tokens</span>
  <span class="ruby-identifier">tokens</span>.<span class="ruby-identifier">reject!</span> &amp;<span class="ruby-ivar">@reject_condition</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-rejects_token_if">
            
              <a name="method-i-rejects_token_if"></a><b>rejects_token_if</b>(&amp;condition)
            
          </div>
          
          
            <div class="description">
              <p>Reject tokens after tokenizing based on the given criteria.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-rejects_token_if_source')" id="l_method-i-rejects_token_if_source">show</a>
                
              </p>
              <div id="method-i-rejects_token_if_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 123</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">rejects_token_if</span> &amp;<span class="ruby-identifier">condition</span>
  <span class="ruby-ivar">@reject_condition</span> = <span class="ruby-identifier">condition</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_illegals">
            
              <a name="method-i-remove_illegals"></a><b>remove_illegals</b>(text)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_illegals_source')" id="l_method-i-remove_illegals_source">show</a>
                
              </p>
              <div id="method-i-remove_illegals_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 68</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_illegals</span> <span class="ruby-identifier">text</span>
  <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub!</span> <span class="ruby-ivar">@removes_characters_regexp</span>, <span class="ruby-constant">EMPTY_STRING</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@removes_characters_regexp</span>
  <span class="ruby-identifier">text</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_non_single_stopwords">
            
              <a name="method-i-remove_non_single_stopwords"></a><b>remove_non_single_stopwords</b>(text)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_non_single_stopwords_source')" id="l_method-i-remove_non_single_stopwords_source">show</a>
                
              </p>
              <div id="method-i-remove_non_single_stopwords_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 53</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_non_single_stopwords</span> <span class="ruby-identifier">text</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@remove_stopwords_regexp</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">match</span> <span class="ruby-identifier">@@non_single_stopword_regexp</span>
  <span class="ruby-identifier">remove_stopwords</span> <span class="ruby-identifier">text</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_stopwords">
            
              <a name="method-i-remove_stopwords"></a><b>remove_stopwords</b>(text)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_stopwords_source')" id="l_method-i-remove_stopwords_source">show</a>
                
              </p>
              <div id="method-i-remove_stopwords_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 48</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_stopwords</span> <span class="ruby-identifier">text</span>
  <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub!</span> <span class="ruby-ivar">@remove_stopwords_regexp</span>, <span class="ruby-constant">EMPTY_STRING</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@remove_stopwords_regexp</span>
  <span class="ruby-identifier">text</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-removes_characters">
            
              <a name="method-i-removes_characters"></a><b>removes_characters</b>(regexp)
            
          </div>
          
          
            <div class="description">
              <p>Illegals.</p>

<p>We only allow regexps (even if string would be okay too for gsub! - it’s
too hard to understand)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-removes_characters_source')" id="l_method-i-removes_characters_source">show</a>
                
              </p>
              <div id="method-i-removes_characters_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 64</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">removes_characters</span> <span class="ruby-identifier">regexp</span>
  <span class="ruby-identifier">check_argument_in</span> <span class="ruby-identifier">__method__</span>, <span class="ruby-constant">Regexp</span>, <span class="ruby-identifier">regexp</span>
  <span class="ruby-ivar">@removes_characters_regexp</span> = <span class="ruby-identifier">regexp</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-split">
            
              <a name="method-i-split"></a><b>split</b>(text)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-split_source')" id="l_method-i-split_source">show</a>
                
              </p>
              <div id="method-i-split_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 82</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">split</span> <span class="ruby-identifier">text</span>
  <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span> <span class="ruby-ivar">@splits_text_on</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-splits_text_on">
            
              <a name="method-i-splits_text_on"></a><b>splits_text_on</b>(regexp_or_string)
            
          </div>
          
          
            <div class="description">
              <p>Splitting.</p>

<p>We allow Strings and Regexps. Note: We do not test against to_str since
symbols do not work with String#split.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-splits_text_on_source')" id="l_method-i-splits_text_on_source">show</a>
                
              </p>
              <div id="method-i-splits_text_on_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 78</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">splits_text_on</span> <span class="ruby-identifier">regexp_or_string</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span> <span class="ruby-node">&quot;#{__method__} takes a Regexp or String as argument, not a #{regexp_or_string.class}.&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Regexp</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">regexp_or_string</span> <span class="ruby-operator">||</span> <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">regexp_or_string</span>
  <span class="ruby-ivar">@splits_text_on</span> = <span class="ruby-identifier">regexp_or_string</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-stopwords">
            
              <a name="method-i-stopwords"></a><b>stopwords</b>(regexp)
            
          </div>
          
          
            <div class="description">
              <p>Stopwords.</p>

<p>We only allow regexps (even if string would be okay too for gsub! - it’s
too hard to understand)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-stopwords_source')" id="l_method-i-stopwords_source">show</a>
                
              </p>
              <div id="method-i-stopwords_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 44</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">stopwords</span> <span class="ruby-identifier">regexp</span>
  <span class="ruby-identifier">check_argument_in</span> <span class="ruby-identifier">__method__</span>, <span class="ruby-constant">Regexp</span>, <span class="ruby-identifier">regexp</span>
  <span class="ruby-ivar">@remove_stopwords_regexp</span> = <span class="ruby-identifier">regexp</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-substitute_characters">
            
              <a name="method-i-substitute_characters"></a><b>substitute_characters</b>(text)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-substitute_characters_source')" id="l_method-i-substitute_characters_source">show</a>
                
              </p>
              <div id="method-i-substitute_characters_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 117</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">substitute_characters</span> <span class="ruby-identifier">text</span>
  <span class="ruby-identifier">substituter?</span><span class="ruby-operator">?</span> <span class="ruby-identifier">substituter</span>.<span class="ruby-identifier">substitute</span>(<span class="ruby-identifier">text</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">text</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-substitutes_characters_with">
            
              <a name="method-i-substitutes_characters_with"></a><b>substitutes_characters_with</b>(substituter = CharacterSubstituters::WestEuropean.new)
            
          </div>
          
          
            <div class="description">
              <p>Substitute Characters with this substituter.</p>

<p>Default is European Character substitution.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-substitutes_characters_with_source')" id="l_method-i-substitutes_characters_with_source">show</a>
                
              </p>
              <div id="method-i-substitutes_characters_with_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 113</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">substitutes_characters_with</span> <span class="ruby-identifier">substituter</span> = <span class="ruby-constant">CharacterSubstituters</span><span class="ruby-operator">::</span><span class="ruby-constant">WestEuropean</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span> <span class="ruby-node">&quot;The substitutes_characters_with option needs a character substituter, which responds to #substitute.&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">substituter</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:substitute</span>)
  <span class="ruby-ivar">@substituter</span> = <span class="ruby-identifier">substituter</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_s">
            
              <a name="method-i-to_s"></a><b>to_s</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_s_source')" id="l_method-i-to_s_source">show</a>
                
              </p>
              <div id="method-i-to_s_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 26</span>
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">to_s</span>
      <span class="ruby-identifier">reject_condition_location</span> = <span class="ruby-ivar">@reject_condition</span>.<span class="ruby-identifier">to_s</span>[<span class="ruby-regexp">/:(\d+) \(lambda\)/</span>, <span class="ruby-number">1</span>]
      <span class="ruby-string">&quot;Removes characters: #{@removes_characters_regexp ? &quot;/#{@removes_characters_regexp.source}/&quot; : '-'}
Stopwords:          #{@remove_stopwords_regexp ? &quot;/#{@remove_stopwords_regexp.source}/&quot; : '-'}
Splits text on:     #{@splits_text_on.respond_to?(:source) ? &quot;/#{@splits_text_on.source}/&quot; : (@splits_text_on ? @splits_text_on : '-')}
Normalizes words:   #{@normalizes_words_regexp_replaces ? @normalizes_words_regexp_replaces : '-'}
Rejects tokens?     #{reject_condition_location ? &quot;Yes, see line #{reject_condition_location} in app/application.rb&quot; : '-'}
Substitutes chars?  #{@substituter ? &quot;Yes, using #{@substituter}.&quot; : '-' }
Case sensitive?     #{@case_sensitive ? &quot;Yes.&quot; : &quot;-&quot;}
&quot;</span>
    <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-tokenize">
            
              <a name="method-i-tokenize"></a><b>tokenize</b>(text)
            
          </div>
          
          
            <div class="description">
              <p>Returns a number of tokens, generated from the given text, based on the
parameters given.</p>

<p>Returns:</p>

<pre>[[:token1, :token2], [&quot;Original1&quot;, &quot;Original2&quot;]]</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-tokenize_source')" id="l_method-i-tokenize_source">show</a>
                
              </p>
              <div id="method-i-tokenize_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 180</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">tokenize</span> <span class="ruby-identifier">text</span>
  <span class="ruby-identifier">text</span>   = <span class="ruby-identifier">preprocess</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment"># processing the text</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">empty_tokens</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">blank?</span>
  <span class="ruby-identifier">words</span>  = <span class="ruby-identifier">pretokenize</span> <span class="ruby-identifier">text</span> <span class="ruby-comment"># splitting and preparations for tokenizing</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">empty_tokens</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">words</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">tokens</span> = <span class="ruby-identifier">tokens_for</span> <span class="ruby-identifier">words</span> <span class="ruby-comment"># creating tokens / strings</span>
  [<span class="ruby-identifier">tokens</span>, <span class="ruby-identifier">words</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-tokens_for">
            
              <a name="method-i-tokens_for"></a><b>tokens_for</b>(words)
            
          </div>
          
          
            <div class="description">
              <p>Downcases.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-tokens_for_source')" id="l_method-i-tokens_for_source">show</a>
                
              </p>
              <div id="method-i-tokens_for_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/tokenizer.rb, line 224</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">tokens_for</span> <span class="ruby-identifier">words</span>
  <span class="ruby-identifier">words</span>.<span class="ruby-identifier">collect!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">word</span><span class="ruby-operator">|</span> <span class="ruby-identifier">word</span>.<span class="ruby-identifier">downcase!</span>; <span class="ruby-identifier">word</span> } <span class="ruby-keyword">if</span> <span class="ruby-identifier">downcase?</span>
  <span class="ruby-identifier">words</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    