<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Picky::Query::Allocations</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../css/github.css" type="text/css" media="screen" />
<script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            Picky::Query::Allocations 
            
                <span class="parent">&lt; 
                    
                    <a href="../../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/picky/query/allocations_rb.html">lib/picky/query/allocations.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>Container class for <a href="Allocation.html">Allocation</a> s.</p>

<p>This class is asked by the <a href="../Results.html">Results</a> class to
compile and process a query. It then asks each <a
href="Allocation.html">Allocation</a> to process their ids and scores.</p>

<p>It also offers convenience methods to access <a
href="Allocations.html#method-i-ids">ids</a> of its <a
href="Allocation.html">Allocation</a> s.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-calculate_score">calculate_score</a>,
              </li>
            
              
              <li>
                <a href="#method-i-calculate_total">calculate_total</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-ids">ids</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-process-21">process!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-process_unique-21">process_unique!</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-reduce_to">reduce_to</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove">remove</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-sort-21">sort!</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-to_a">to_a</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_result">to_result</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_s">to_s</a>,
              </li>
            
              
              <li>
                <a href="#method-i-total">total</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-uniq">uniq</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <a name="method-c-new"></a><b>new</b>(allocations = [])
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 25</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">initialize</span> <span class="ruby-identifier">allocations</span> = []
  <span class="ruby-ivar">@allocations</span> = <span class="ruby-identifier">allocations</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-calculate_score">
            
              <a name="method-i-calculate_score"></a><b>calculate_score</b>(weights)
            
          </div>
          
          
            <div class="description">
              <p>Score each allocation.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-calculate_score_source')" id="l_method-i-calculate_score_source">show</a>
                
              </p>
              <div id="method-i-calculate_score_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 31</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">calculate_score</span> <span class="ruby-identifier">weights</span>
  <span class="ruby-ivar">@allocations</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">allocation</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">allocation</span>.<span class="ruby-identifier">calculate_score</span> <span class="ruby-identifier">weights</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-calculate_total">
            
              <a name="method-i-calculate_total"></a><b>calculate_total</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-calculate_total_source')" id="l_method-i-calculate_total_source">show</a>
                
              </p>
              <div id="method-i-calculate_total_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 135</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">calculate_total</span>
  <span class="ruby-identifier">inject</span>(<span class="ruby-number">0</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">total</span>, <span class="ruby-identifier">allocation</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">total</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">allocation</span>.<span class="ruby-identifier">count</span> <span class="ruby-keyword">or</span> <span class="ruby-keyword">return</span> <span class="ruby-identifier">total</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-ids">
            
              <a name="method-i-ids"></a><b>ids</b>(amount = 20)
            
          </div>
          
          
            <div class="description">
              <p>Returns the top amount ids.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-ids_source')" id="l_method-i-ids_source">show</a>
                
              </p>
              <div id="method-i-ids_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 59</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">ids</span> <span class="ruby-identifier">amount</span> = <span class="ruby-number">20</span>
  <span class="ruby-ivar">@allocations</span>.<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">total</span>, <span class="ruby-identifier">allocation</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">total</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">amount</span> <span class="ruby-operator">?</span> (<span class="ruby-keyword">return</span> <span class="ruby-identifier">total</span>.<span class="ruby-identifier">shift</span>(<span class="ruby-identifier">amount</span>)) <span class="ruby-operator">:</span> <span class="ruby-identifier">total</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">allocation</span>.<span class="ruby-identifier">ids</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-process-21">
            
              <a name="method-i-process-21"></a><b>process!</b>(amount, offset = 0, terminate_early = nil)
            
          </div>
          
          
            <div class="description">
              <p>This is the main method of this class that will replace ids and count.</p>

<p>What it does is calculate the ids and counts of its allocations for being
used in the results. It also calculates the total</p>

<p>Parameters:</p>

<pre>* amount: the amount of ids to calculate
* offset: the offset from where in the result set to take the ids
* terminate_early: Whether to calculate all allocations.</pre>

<p>Note: With an amount of 0, an offset &gt; 0 doesn’t make much</p>

<pre>sense, as seen in the live search.</pre>

<p>Note: Each allocation caches its count, but not its ids (thrown away).</p>

<pre class="ruby"><span class="ruby-constant">The</span> <span class="ruby-identifier">ids</span> <span class="ruby-identifier">are</span> <span class="ruby-identifier">cached</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">this</span> <span class="ruby-keyword">class</span>.
</pre>

<p>Note: It’s possible that no ids are returned by an allocation, but a count.
(In case of an offset)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-process-21_source')" id="l_method-i-process-21_source">show</a>
                
              </p>
              <div id="method-i-process-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 83</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">process!</span> <span class="ruby-identifier">amount</span>, <span class="ruby-identifier">offset</span> = <span class="ruby-number">0</span>, <span class="ruby-identifier">terminate_early</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">allocation</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">calculated_ids</span> = <span class="ruby-identifier">allocation</span>.<span class="ruby-identifier">process!</span> <span class="ruby-identifier">amount</span>, <span class="ruby-identifier">offset</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">calculated_ids</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">allocation</span>.<span class="ruby-identifier">count</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">offset</span>.<span class="ruby-identifier">zero?</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">amount</span> = <span class="ruby-identifier">amount</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">calculated_ids</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># we need less results from the following allocation</span>
      <span class="ruby-identifier">offset</span> = <span class="ruby-number">0</span>                            <span class="ruby-comment"># we have already passed the offset</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">terminate_early</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">amount</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
      <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">terminate_early</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">terminate_early</span> <span class="ruby-operator">-=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-process_unique-21">
            
              <a name="method-i-process_unique-21"></a><b>process_unique!</b>(amount, offset = 0, terminate_early = nil)
            
          </div>
          
          
            <div class="description">
              <p>Same as <a href="Allocations.html#method-i-process-21">process!</a> but
removes duplicate ids from results.</p>

<p>Note that in the result later on an allocation won’t be included if it
contains no ids (even in case they have been eliminated by the unique
constraint in this method).</p>

<p>Note: Slower than <a
href="Allocations.html#method-i-process-21">process!</a> especially with
large offsets.</p>

<p>TODO Remove duplicate code.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-process_unique-21_source')" id="l_method-i-process_unique-21_source">show</a>
                
              </p>
              <div id="method-i-process_unique-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 109</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">process_unique!</span> <span class="ruby-identifier">amount</span>, <span class="ruby-identifier">offset</span> = <span class="ruby-number">0</span>, <span class="ruby-identifier">terminate_early</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">unique_ids</span> = []
  <span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">allocation</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">calculated_ids</span> = <span class="ruby-identifier">allocation</span>.<span class="ruby-identifier">process_with_illegals!</span> <span class="ruby-identifier">amount</span>, <span class="ruby-number">0</span>, <span class="ruby-identifier">unique_ids</span>
    <span class="ruby-identifier">projected_offset</span> = <span class="ruby-identifier">offset</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">allocation</span>.<span class="ruby-identifier">count</span>
    <span class="ruby-identifier">unique_ids</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">calculated_ids</span> <span class="ruby-comment"># TODO uniq this?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">projected_offset</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">allocation</span>.<span class="ruby-identifier">ids</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-number">0</span>, <span class="ruby-identifier">offset</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">projected_offset</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">calculated_ids</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">amount</span> = <span class="ruby-identifier">amount</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">calculated_ids</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># we need less results from the following allocation</span>
      <span class="ruby-identifier">offset</span> = <span class="ruby-number">0</span>                            <span class="ruby-comment"># we have already passed the offset</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">terminate_early</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">amount</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
      <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">terminate_early</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">terminate_early</span> <span class="ruby-operator">-=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-reduce_to">
            
              <a name="method-i-reduce_to"></a><b>reduce_to</b>(amount)
            
          </div>
          
          
            <div class="description">
              <p>Reduces the amount of allocations to x.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-reduce_to_source')" id="l_method-i-reduce_to_source">show</a>
                
              </p>
              <div id="method-i-reduce_to_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 45</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">reduce_to</span> <span class="ruby-identifier">amount</span>
  <span class="ruby-ivar">@allocations</span> = <span class="ruby-ivar">@allocations</span>.<span class="ruby-identifier">shift</span> <span class="ruby-identifier">amount</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove">
            
              <a name="method-i-remove"></a><b>remove</b>(categories = [])
            
          </div>
          
          
            <div class="description">
              <p>Removes combinations.</p>

<p>Only those passed in are removed.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_source')" id="l_method-i-remove_source">show</a>
                
              </p>
              <div id="method-i-remove_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 53</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove</span> <span class="ruby-identifier">categories</span> = []
  <span class="ruby-ivar">@allocations</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">allocation</span><span class="ruby-operator">|</span> <span class="ruby-identifier">allocation</span>.<span class="ruby-identifier">remove</span> <span class="ruby-identifier">categories</span> } <span class="ruby-keyword">unless</span> <span class="ruby-identifier">categories</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-sort-21">
            
              <a name="method-i-sort-21"></a><b>sort!</b>()
            
          </div>
          
          
            <div class="description">
              <p>Sort the allocations.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-sort-21_source')" id="l_method-i-sort-21_source">show</a>
                
              </p>
              <div id="method-i-sort-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 39</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">sort!</span>
  <span class="ruby-ivar">@allocations</span>.<span class="ruby-identifier">sort!</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_a">
            
              <a name="method-i-to_a"></a><b>to_a</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_a_source')" id="l_method-i-to_a_source">show</a>
                
              </p>
              <div id="method-i-to_a_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 145</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">to_a</span>
  <span class="ruby-ivar">@allocations</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_result">
            
              <a name="method-i-to_result"></a><b>to_result</b>()
            
          </div>
          
          
            <div class="description">
              <p><a href="Allocations.html">Allocations</a> for results are in the form: [</p>

<pre>allocation1.to_result,
allocation2.to_result
...</pre>

<p>]</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_result_source')" id="l_method-i-to_result_source">show</a>
                
              </p>
              <div id="method-i-to_result_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 156</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">to_result</span>
  <span class="ruby-ivar">@allocations</span>.<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:to_result</span>).<span class="ruby-identifier">compact</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_s">
            
              <a name="method-i-to_s"></a><b>to_s</b>()
            
          </div>
          
          
            <div class="description">
              <p>Simply inspects the internal allocations.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_s_source')" id="l_method-i-to_s_source">show</a>
                
              </p>
              <div id="method-i-to_s_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 162</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">to_s</span>
  <span class="ruby-identifier">to_result</span>.<span class="ruby-identifier">inspect</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-total">
            
              <a name="method-i-total"></a><b>total</b>()
            
          </div>
          
          
            <div class="description">
              <p>The total is simply the sum of the counts of all allocations.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-total_source')" id="l_method-i-total_source">show</a>
                
              </p>
              <div id="method-i-total_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">total</span>
  <span class="ruby-ivar">@total</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">calculate_total</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-uniq">
            
              <a name="method-i-uniq"></a><b>uniq</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-uniq_source')" id="l_method-i-uniq_source">show</a>
                
              </p>
              <div id="method-i-uniq_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/picky/query/allocations.rb, line 141</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">uniq</span>
  <span class="ruby-ivar">@allocations</span>.<span class="ruby-identifier">uniq!</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    